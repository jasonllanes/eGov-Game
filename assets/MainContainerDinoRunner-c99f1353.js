import{u as z,r,j as e}from"./index-972206a7.js";import{e as K,a as q}from"./eGovPHLogoB-9418e187.js";import{e as V,a as X,b as Q,c as Z,d as _,f as ee,g as te,h as se,i as ne,j as ae}from"./eTravel-4a14879b.js";const re="/eGov-Game/assets/bird-e183fa91.png",le=()=>{const L=z(),x=r.useRef(null),h=r.useRef(null),b=r.useRef(0),m=400,v=r.useRef(!1),[l,T]=r.useState(!1),[c,k]=r.useState(!1),[d,O]=r.useState(0),[S,Y]=r.useState(0),[I,w]=r.useState([]),[o,R]=r.useState({x:100,y:m-60,width:55,height:55,isJumping:!1,velocityY:0}),[G,M]=r.useState(2.8),C=[V,X,Q,Z,_,ee,te,se,ne,ae];r.useEffect(()=>{const t=localStorage.getItem("dinorunnerHighScore");t&&Y(parseInt(t));const n=s=>{!l||c||(s.code==="Space"||s.key==="ArrowUp"||s.key===" ")&&!s.repeat&&N()};return window.addEventListener("keydown",n),()=>{h.current&&cancelAnimationFrame(h.current),window.removeEventListener("keydown",n)}},[l,c]);const D=t=>{if(!(!l||c)&&(t.code==="Space"||t.key==="ArrowUp"||t.key===" ")&&!t.repeat){const n=Date.now();n-j.current>300&&(j.current=n,N())}},j=r.useRef(0),H=()=>{if(!l||c)return;const t=Date.now();t-j.current>300&&(j.current=t,N())},N=()=>{!o.isJumping&&!v.current&&(v.current=!0,R(t=>({...t,isJumping:!0,velocityY:-12})))},g=r.useRef(-1);r.useEffect(()=>{if(l&&!c){const t=n=>{var p;P();const s=((p=x.current)==null?void 0:p.clientWidth)||800,i=300,a=I.length===0||g.current>0&&s-g.current>i,f=1800+Math.random()*1200;a&&n-b.current>f&&(J(),b.current=n),$(),O(y=>y+1),d%500===0&&d>0&&M(y=>Math.min(y+.4,10)),h.current=requestAnimationFrame(t)};h.current=requestAnimationFrame(t)}return()=>{h.current&&cancelAnimationFrame(h.current)}},[l,c,d]);const P=()=>{R(n=>{let s=n.velocityY+.4,i=n.y+s,a=n.x;return n.isJumping?n.velocityY<0?a=Math.min(a+.9,160):n.velocityY>0&&(a=Math.max(a-.3,100)):a>100&&(a=Math.max(a-.2,100)),i>=m-n.height?(i=m-n.height,s=0,v.current=!1,{...n,x:a,y:i,velocityY:s,isJumping:!1}):{...n,x:a,y:i,velocityY:s}})},J=()=>{if(!x.current)return;const t=x.current.clientWidth,n=C[Math.floor(Math.random()*C.length)],s=55+Math.random()*25,i=45+Math.random()*15,a=Math.floor(Math.random()*100),f={id:Date.now(),imageUrl:n,x:t+a,width:i,height:s};g.current=f.x,w(p=>[...p,f])},$=()=>{x.current&&w(t=>t.map(s=>({...s,x:s.x-G})).filter(s=>{if(s.x+s.width<0)return g.current===s.x+G&&(g.current=-1),!1;const i=o.x,a=i+o.width,f=o.y,p=o.y+o.height,y=s.x,F=s.x+s.width,B=m-s.height,W=m,u=8;return a-u>y+u&&i+u<F-u&&p-u>B+u&&f+u<W-u&&setTimeout(()=>U(),10),!0}))},A=()=>{T(!0),k(!1),O(0),M(2.5),w([]),v.current=!1,g.current=-1,R({x:100,y:m-60,width:55,height:55,isJumping:!1,velocityY:0}),b.current=0},U=()=>{k(!0),d>S&&(Y(d),localStorage.setItem("dinorunnerHighScore",d.toString())),w([])},E=()=>{L("/eGov-Game/main-page")};return e.jsxs("div",{className:"dino-container",children:[e.jsx("button",{className:"home-button",onClick:E,children:"Home"}),e.jsx("h1",{className:"dino-title",children:e.jsxs("div",{className:"logos-header",children:[e.jsx("div",{className:"logo-wrapper",children:e.jsx("img",{src:K,alt:"eGov Logo",className:"header-logo"})}),e.jsx("div",{className:"logo-wrapper",children:e.jsx("img",{src:q,alt:"eLGU Logo",className:"header-logo"})})]})}),e.jsxs("div",{className:"game-info",children:[e.jsxs("div",{className:"score-display",children:["Score: ",d]}),e.jsxs("div",{className:"high-score-display",children:["Best: ",S]}),e.jsxs("div",{className:"speed-display",children:["Speed: ",G.toFixed(1)]})]}),e.jsxs("div",{ref:x,className:"dino-game-area",onClick:H,onKeyDown:D,tabIndex:0,children:[e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"5px",backgroundColor:"rgba(40, 200, 120, 0.8)",zIndex:5}}),I.map(t=>e.jsx("div",{className:"obstacle",style:{position:"absolute",left:`${t.x}px`,bottom:"5px",width:`${t.width}px`,height:`${t.height}px`,backgroundColor:"rgba(40, 200, 120, 0.3)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:8},children:e.jsx("img",{src:t.imageUrl,alt:"Obstacle",className:"obstacle-image",style:{width:"85%",height:"85%",objectFit:"contain"}})},t.id)),l&&!c&&e.jsx("div",{style:{position:"absolute",left:`${o.x}px`,top:`${o.y}px`,width:`${o.width}px`,height:`${o.height}px`,backgroundImage:`url(${re})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",zIndex:10,filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.4))",transform:o.velocityY<0?"rotate(-20deg) scale(1.2)":"rotate(10deg) scale(1.2)"}})]}),!l&&!c&&e.jsxs("div",{className:"start-screen",children:[e.jsx("h2",{children:"eGov Runner"}),e.jsx("p",{children:"Jump over obstacles and survive!"}),e.jsx("p",{children:"Press Space, Up Arrow or tap/click to jump"}),e.jsx("p",{children:e.jsx("em",{children:"(One jump only until you land!)"})}),e.jsx("button",{onClick:A,children:"Start Game"})]}),c&&e.jsxs("div",{className:"game-over-screen",children:[e.jsx("h2",{children:"Game Over!"}),e.jsxs("p",{children:["Your Score: ",d]}),e.jsxs("p",{children:["High Score: ",S]}),e.jsx("button",{onClick:A,children:"Play Again"})]})]})};export{le as default};
