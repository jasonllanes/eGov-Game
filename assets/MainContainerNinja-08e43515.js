import{u as ee,r as n,j as t}from"./index-da7b9a88.js";import{e as se,a as te}from"./eGovPHLogoB-9418e187.js";import{e as oe,a as ae,b as ne,c as re,d as ce,f as le,g as ie,h as ue,i as de,j as he}from"./eTravel-4a14879b.js";const me="/eGov-Game/assets/bird-e183fa91.png",ve=()=>{const $=ee(),i=n.useRef(null),u=n.useRef(null),p=n.useRef(0),f=n.useRef([]),[l,E]=n.useState(!1),[c,S]=n.useState(!1),[m,M]=n.useState(0),[v,N]=n.useState(30),[x,C]=n.useState(0),[F,g]=n.useState([]),[k,z]=n.useState(0),[X,G]=n.useState(!1),[I,q]=n.useState({x:0,y:0}),[T,w]=n.useState(!1),H=[oe,ae,ne,re,ce,le,ie,ue,de,he];n.useEffect(()=>{const e=localStorage.getItem("ninjaHighScore");return e&&C(parseInt(e)),()=>{u.current&&cancelAnimationFrame(u.current)}},[]),n.useEffect(()=>{let e;return l&&!c&&v>0&&(e=setInterval(()=>{N(o=>o<=1?(A(),clearInterval(e),0):o-1)},1e3)),()=>{e&&clearInterval(e)}},[l,c,v]),n.useEffect(()=>{if(l&&!c){const e=o=>{o-p.current>2500&&(D(),p.current=o),O(),u.current=requestAnimationFrame(e)};u.current=requestAnimationFrame(e)}return()=>{u.current&&cancelAnimationFrame(u.current)}},[l,c,F]);const B=()=>{const e=["square","circle","triangle","pentagon","hexagon"];return Math.random()<.1?"bomb":e[Math.floor(Math.random()*e.length)]},P=()=>{const e=["#FF5733","#33FF57","#3357FF","#FF33A8","#33FFF9","#F9FF33"];return e[Math.floor(Math.random()*e.length)]},D=()=>{if(!i.current)return;const e=i.current.clientWidth,o=i.current.clientHeight,r=Math.floor(Math.random()*2)+1,s=[];for(let a=0;a<r;a++){const d=B(),h=d==="bomb"?50:Math.floor(Math.random()*30)+40,U=Math.random()*(e-h),j=o+h,Q=(Math.random()-.5)*3,V=-Math.random()*10-8,Z=Math.random()*360,_=(Math.random()-.5)*5;let b;d==="bomb"?b=me:Math.random()<.5&&(b=H[Math.floor(Math.random()*H.length)]),s.push({id:Date.now()+a,type:d,imageUrl:b,x:U,y:j,velocityX:Q,velocityY:V,rotation:Z,rotationSpeed:_,size:h,sliced:!1,color:P()})}g(a=>[...a,...s])},O=()=>{if(!i.current)return;const e=i.current.clientHeight,o=.35;g(r=>r.map(s=>s.sliced?{...s,y:s.y+(s.velocityY+o)*1.3,x:s.x+s.velocityX,velocityY:s.velocityY+o,rotation:(s.rotation+s.rotationSpeed)%360}:{...s,y:s.y+s.velocityY,x:s.x+s.velocityX,velocityY:s.velocityY+o,rotation:(s.rotation+s.rotationSpeed)%360}).filter(s=>s.y<e+s.size*2))},L=e=>{var a;if(!l||c)return;const o=(a=i.current)==null?void 0:a.getBoundingClientRect();if(!o)return;const r=e.clientX-o.left,s=e.clientY-o.top;q({x:r,y:s}),f.current.push({x:r,y:s}),f.current.length>10&&f.current.shift(),T&&W(r,s)},R=()=>{!l||c||(w(!0),f.current=[])},y=()=>{!l||c||w(!1)},W=(e,o)=>{let r=0;g(s=>s.map(a=>{if(!a.sliced){const d=e-(a.x+a.size/2),h=o-(a.y+a.size/2);if(Math.sqrt(d*d+h*h)<a.size/2)return a.type==="bomb"?(setTimeout(()=>A(),100),{...a,sliced:!0}):(M(j=>j+1),r++,{...a,sliced:!0})}return a})),r>1&&(z(r),G(!0),setTimeout(()=>{G(!1)},1e3))},Y=()=>{E(!0),S(!1),M(0),N(45),g([]),p.current=0},A=()=>{S(!0),m>x&&(C(m),localStorage.setItem("ninjaHighScore",m.toString())),g([])},K=()=>{$("/eGov-Game/main-page")},J=e=>`${e}s`;return t.jsxs("div",{className:"ninja-container",children:[t.jsx("button",{className:"home-button",onClick:K,children:"Home"}),t.jsx("h1",{className:"ninja-title",children:t.jsxs("div",{className:"logos-header",children:[t.jsx("div",{className:"logo-wrapper",children:t.jsx("img",{src:se,alt:"eGov Logo",className:"header-logo"})}),t.jsx("div",{className:"logo-wrapper",children:t.jsx("img",{src:te,alt:"eLGU Logo",className:"header-logo"})})]})}),t.jsxs("div",{className:"game-info",children:[t.jsxs("div",{className:"score-display",children:["Score: ",m]}),t.jsxs("div",{className:"timer-display",children:["Time: ",J(v)]}),t.jsxs("div",{className:"high-score-display",children:["Best: ",x]})]}),t.jsxs("div",{ref:i,className:"ninja-game-area",onMouseMove:L,onMouseDown:R,onMouseUp:y,onMouseLeave:y,onTouchStart:R,onTouchEnd:y,onTouchMove:e=>{const o=e.touches[0],r=new MouseEvent("mousemove",{clientX:o.clientX,clientY:o.clientY});L(r)},children:[F.map(e=>t.jsxs("div",{className:`game-item ${e.sliced?"sliced":""} ${e.type==="bomb"?"bomb":""}`,style:{left:`${e.x}px`,top:`${e.y}px`,width:`${e.size}px`,height:`${e.size}px`,transform:`rotate(${e.rotation}deg)`,backgroundColor:e.imageUrl?"transparent":e.color},children:[e.imageUrl&&t.jsx("img",{src:e.imageUrl,alt:e.type==="bomb"?"Bomb":"Logo",className:"item-image"}),!e.imageUrl&&e.type==="triangle"&&t.jsx("div",{className:"triangle",style:{borderBottomColor:e.color}}),!e.imageUrl&&e.type==="pentagon"&&t.jsx("div",{className:"pentagon",style:{background:e.color}}),!e.imageUrl&&e.type==="hexagon"&&t.jsx("div",{className:"hexagon",style:{background:e.color}})]},e.id)),T&&t.jsx("div",{className:"sword-slash",style:{left:`${I.x}px`,top:`${I.y}px`}}),X&&t.jsxs("div",{className:"combo-display",children:[k,"x Combo!"]})]}),!l&&!c&&t.jsxs("div",{className:"start-screen",children:[t.jsx("h2",{children:"eGov Ninja"}),t.jsx("p",{children:"Swipe to slice shapes! Avoid the bombs!"}),t.jsx("button",{onClick:Y,children:"Start Game"})]}),c&&t.jsxs("div",{className:"game-over-screen",children:[t.jsx("h2",{children:"Game Over!"}),t.jsxs("p",{children:["Your Score: ",m]}),t.jsxs("p",{children:["High Score: ",x]}),t.jsx("button",{onClick:Y,children:"Play Again"})]})]})};export{ve as default};
