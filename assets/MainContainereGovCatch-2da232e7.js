import{u as q,r,j as e}from"./index-8b18a069.js";import{e as B,a as O}from"./eGovPHLogoB-9418e187.js";import{e as X,a as K,b as V,c as J,d as Q,f as Z,g as _,h as ee,i as te,j as ae}from"./eTravel-4a14879b.js";const se="/eGov-Game/assets/bird-e183fa91.png",oe=()=>{const M=q(),n=r.useRef(null),g=r.useRef(null),v=r.useRef(0),[c,R]=r.useState(!1),[o,S]=r.useState(!1),[m,I]=r.useState(0),[z,N]=r.useState(1),[y,G]=r.useState(0),[T,p]=r.useState([]),[i,x]=r.useState({x:0,width:80,height:60}),[C,H]=r.useState(""),[f,k]=r.useState(1),j=[X,K,V,J,Q,Z,_,ee,te,ae];r.useEffect(()=>{const t=localStorage.getItem("imagedropHighScore");if(t&&G(parseInt(t)),n.current){const s=n.current.clientWidth;x({...i,x:s/2-i.width/2})}return window.addEventListener("keydown",A),()=>{g.current&&cancelAnimationFrame(g.current),window.removeEventListener("keydown",A)}},[]);const $=()=>{const t=Math.floor(Math.random()*j.length);H(j[t])},A=t=>{if(!c||o||!n.current)return;const s=n.current.clientWidth,l=20;t.key==="ArrowLeft"?x(a=>({...a,x:Math.max(0,a.x-l)})):t.key==="ArrowRight"&&x(a=>({...a,x:Math.min(s-a.width,a.x+l)}))},F=t=>{if(!c||o||!n.current)return;const s=n.current.getBoundingClientRect(),l=s.width,a=t.clientX-s.left;x(d=>({...d,x:Math.max(0,Math.min(l-d.width,a-d.width/2))}))};r.useEffect(()=>{if(c&&!o){const t=s=>{s-v.current>1200/f&&(W(),v.current=s),P(),g.current=requestAnimationFrame(t)};g.current=requestAnimationFrame(t)}return()=>{g.current&&cancelAnimationFrame(g.current)}},[c,o,f]);const W=()=>{if(!n.current)return;const t=n.current.clientWidth,s=j[Math.floor(Math.random()*j.length)],l=s===C,a=70,d=Math.random()*20-10,u=a+d,w=Math.random()*(t-u),b=-u,h=l?1.5+f*.4:2+f*.5,U={id:Date.now(),imageUrl:s,x:w,y:b,velocityY:h,size:u,isTarget:l,caught:!1};p(Y=>[...Y,U])},P=()=>{if(!n.current)return;const t=n.current.clientHeight;p(s=>s.map(a=>({...a,y:a.y+a.velocityY})).filter(a=>{if(!a.caught){const d=t-i.height;if(a.y+a.size>=d){const u=a.x+a.size/2,w=i.x,b=i.x+i.width;if(u>=w&&u<=b)return a.isTarget?(I(h=>h+10),(m+10)%50===0&&(k(h=>Math.min(h+.5,5)),N(h=>h+1)),!1):(setTimeout(()=>E(),100),!0)}}return a.y<t+a.size}))},L=()=>{if(R(!0),S(!1),I(0),N(1),k(1),p([]),$(),n.current){const t=n.current.clientWidth;x({...i,x:t/2-i.width/2})}v.current=0},E=()=>{S(!0),m>y&&(G(m),localStorage.setItem("imagedropHighScore",m.toString())),p([])},D=()=>{M("/eGov-Game/main-page")};return e.jsxs("div",{className:"ninja-container",children:[e.jsx("button",{className:"home-button",onClick:D,children:"Home"}),e.jsx("h1",{className:"ninja-title",children:e.jsxs("div",{className:"logos-header",children:[e.jsx("div",{className:"logo-wrapper",children:e.jsx("img",{src:B,alt:"eGov Logo",className:"header-logo"})}),e.jsx("div",{className:"logo-wrapper",children:e.jsx("img",{src:O,alt:"eLGU Logo",className:"header-logo"})})]})}),e.jsxs("div",{className:"game-info",children:[e.jsxs("div",{className:"score-display",children:["Score: ",m]}),e.jsxs("div",{className:"high-score-display",children:["Level: ",z]}),e.jsxs("div",{className:"high-score-display",children:["Best: ",y]})]}),e.jsxs("div",{ref:n,className:"ninja-game-area",onPointerMove:F,children:[c&&!o&&e.jsxs("div",{className:"target-display",children:[e.jsx("h3",{children:"Catch This:"}),e.jsx("div",{style:{backgroundColor:"rgba(40, 200, 120, 0.3)",borderRadius:"8px",padding:"5px",width:"70px",height:"70px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto"},children:e.jsx("img",{src:C,alt:"Target",className:"target-image",style:{width:"85%",height:"85%",objectFit:"contain"}})})]}),T.map(t=>e.jsx("div",{className:"game-item",style:{left:`${t.x}px`,top:`${t.y}px`,width:`${t.size}px`,height:`${t.size}px`,backgroundColor:"rgba(40, 200, 120, 0.2)",borderRadius:"8px",padding:"5px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("img",{src:t.imageUrl,alt:"Falling Logo",className:"item-image",style:{width:"85%",height:"85%",objectFit:"contain"}})},t.id)),c&&!o&&e.jsx("div",{style:{position:"absolute",left:`${i.x}px`,bottom:"10px",width:`${i.width}px`,height:`${i.height}px`,backgroundImage:`url(${se})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",zIndex:10,filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.4))",transform:"scale(1.2)"}}),c&&!o&&e.jsx("div",{style:{position:"absolute",left:`${i.x-10}px`,bottom:"5px",width:`${i.width+20}px`,height:"5px",backgroundColor:"rgba(40, 200, 120, 0.4)",borderRadius:"4px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.3)",zIndex:9}})]}),!c&&!o&&e.jsxs("div",{className:"start-screen",children:[e.jsx("h2",{children:"eGov Image Drop"}),e.jsx("p",{children:"Catch the target image! Avoid the others!"}),e.jsx("p",{children:"Use left/right arrow keys or touch to move"}),e.jsx("button",{onClick:L,children:"Start Game"})]}),o&&e.jsxs("div",{className:"game-over-screen",children:[e.jsx("h2",{children:"Game Over!"}),e.jsxs("p",{children:["Your Score: ",m]}),e.jsxs("p",{children:["High Score: ",y]}),e.jsx("button",{onClick:L,children:"Play Again"})]})]})};export{oe as default};
