import{u as ue,r as o,j as m}from"./index-4be1f7bd.js";const me="/eGov-Game/assets/Bird_2-0803fac5.png",ge="/eGov-Game/assets/pipe-top-a910e768.png",Se="/eGov-Game/assets/pipe-bottom-82697d5b.png",pe="/eGov-Game/assets/Background-8bcfc983.png",xe="/eGov-Game/assets/bg-7ddd4924.png";const Ie=5,V=-22,g=180,$=250,f=70,Me=450,q=15,ve=2,Q=170,ee=830,we=40,S=200,te="flappyBirdHighScore",oe=100,be=30,p=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"],x=5,L=15,ye=3e3,Ce=1500,Te=()=>{const ne=ue(),[s,se]=o.useState(800),[a,re]=o.useState(600),[ae,ie]=o.useState(1),[l,E]=o.useState(a/2),[I,T]=o.useState(0),[M,z]=o.useState([{x:s,height:Math.floor(Math.random()*400)+100}]),[d,N]=o.useState(!1),[h,P]=o.useState(!1),[R,U]=o.useState(0),[u,D]=o.useState(0),[v,ce]=o.useState(0),[w,Z]=o.useState(!1),[b,A]=o.useState([]),[G,_]=o.useState(!1),[y,Y]=o.useState([]),[H,j]=o.useState(!1),B=o.useRef(null),J=o.useRef(null),F=o.useRef(null),W=o.useRef(null),X=o.useRef(null),O=o.useRef(null),k=o.useRef(null),fe=()=>{ne("/eGov-Game/main-page")};o.useEffect(()=>{const n=localStorage.getItem(te);n&&D(parseInt(n))},[]),o.useEffect(()=>{const n=()=>{if(B.current){const e=B.current.clientWidth,t=window.innerHeight*.8,i=1e3,r=1e3,c=i/r;let C=e,K=e/c;K>t&&(K=t,C=t*c),se(i),re(r),ie(C/i)}};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),o.useEffect(()=>{w&&de()},[w]);const le=()=>{const n=[];for(let e=0;e<be;e++)n.push({x:S+60+Math.random()*30,y:l-20+Math.random()*40,size:x+Math.random()*(L-x),color:p[Math.floor(Math.random()*p.length)],speedX:2+Math.random()*3,speedY:-2+Math.random()*4,rotation:Math.random()*Math.PI*2,rotationSpeed:-.1+Math.random()*.2});Y(n),j(!0)};o.useEffect(()=>{if(!G||b.length===0)return;const e=setInterval(()=>{A(i=>i.map(r=>({...r,x:r.x+r.speedX,y:r.y+r.speedY,speedY:r.speedY+.1,rotation:r.rotation+r.rotationSpeed})))},16),t=setTimeout(()=>{_(!1),A([])},ye);return()=>{clearInterval(e),clearTimeout(t)}},[G,b]),o.useEffect(()=>{if(!H||y.length===0)return;const e=setInterval(()=>{Y(i=>i.map(r=>({...r,x:r.x+r.speedX,y:r.y+r.speedY,speedY:r.speedY+.1,rotation:r.rotation+r.rotationSpeed})))},16),t=setTimeout(()=>{j(!1),Y([])},Ce);return()=>{clearInterval(e),clearTimeout(t)}},[H,y]);const de=()=>{const n=[];for(let e=0;e<oe/2;e++)n.push({x:Math.random()*50,y:Math.random()*a/2,size:x+Math.random()*(L-x),color:p[Math.floor(Math.random()*p.length)],speedX:1+Math.random()*3,speedY:-3+Math.random()*6,rotation:Math.random()*Math.PI*2,rotationSpeed:-.1+Math.random()*.2});for(let e=0;e<oe/2;e++)n.push({x:s-Math.random()*50,y:Math.random()*a/2,size:x+Math.random()*(L-x),color:p[Math.floor(Math.random()*p.length)],speedX:-1-Math.random()*3,speedY:-3+Math.random()*6,rotation:Math.random()*Math.PI*2,rotationSpeed:-.1+Math.random()*.2});A(n),_(!0)};o.useEffect(()=>{E(a/2),z([{x:s,height:Math.floor(Math.random()*400)+100}])},[s,a]),o.useEffect(()=>{const n=new Image;n.src=me,n.onload=()=>{F.current=n};const e=new Image;e.src=ge,e.onload=()=>{W.current=e};const t=new Image;t.src=Se,t.onload=()=>{X.current=t};const i=new Image;i.src=pe,i.onload=()=>{O.current=i};const r=new Image;r.src=xe,r.onload=()=>{k.current=r}},[]),o.useEffect(()=>{if(d)return;const n=setInterval(()=>{if(h)E(e=>e+I),T(e=>e+Ie);else{const e=Math.sin(Date.now()/200)*2;E(a/2+e)}ce(e=>(e-ve)%s),h&&(z(e=>{const t=e.map(c=>({...c,x:c.x-q})),i=t.filter(c=>c.x+g>0);return t.reduce((c,C)=>C.x>c?C.x:c,0)<s-Me?[...i,{x:s,height:Math.floor(Math.random()*400)+100}]:i}),M.forEach(e=>{e.x+g<S&&e.x+g>S-q&&U(t=>{const i=t+1;return le(),i>u&&(D(i),localStorage.setItem(te,i.toString()),Z(!0)),i})}),M.forEach(e=>{(l<e.height||l+f>e.height+$)&&e.x<S+f/2&&e.x+g>S-f/2&&N(!0)}),(l+f>a||l<0)&&N(!0))},we);return()=>clearInterval(n)},[I,d,h,M,l,s,a,u]),o.useEffect(()=>{const n=e=>{e.code==="Space"&&!d&&(h||P(!0),T(V),e.preventDefault())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[d,h]),o.useEffect(()=>{const n=J.current;if(!n)return;const e=n.getContext("2d");if(e){if(n.width=s,n.height=a,e.clearRect(0,0,s,a),k.current?(e.drawImage(k.current,v,0,s,a),e.drawImage(k.current,v+s,0,s,a)):(e.fillStyle="skyblue",e.fillRect(0,0,s,a)),O.current&&(e.drawImage(O.current,v,ee,s,Q),e.drawImage(O.current,v+s,ee,s,Q)),M.forEach(t=>{W.current&&e.drawImage(W.current,t.x,0,g,t.height),X.current&&e.drawImage(X.current,t.x,t.height+$,g,a-(t.height+$))}),F.current){e.save(),e.translate(S+f/2,l+f/2);const t=I>0?Math.min(I*.04,Math.PI/4):Math.max(I*.04,-Math.PI/9);e.rotate(t),e.drawImage(F.current,-f/2,-f/2,f,f),e.restore()}G&&b.length>0&&b.forEach(t=>{e.save(),e.translate(t.x,t.y),e.rotate(t.rotation),e.fillStyle=t.color,e.fillRect(-t.size/2,-t.size/2,t.size,t.size),e.restore()}),H&&y.length>0&&y.forEach(t=>{e.save(),e.translate(t.x,t.y),e.rotate(t.rotation),e.fillStyle=t.color,e.fillRect(-t.size/2,-t.size/2,t.size,t.size),e.restore()}),e.font="bold 40px Arial",e.fillStyle="white",e.strokeStyle="black",e.lineWidth=2,e.textAlign="left",e.strokeText(`Score: ${R}`,30,70),e.fillText(`Score: ${R}`,30,70),e.textAlign="right",e.strokeText(`High Score: ${u}`,s-30,70),e.fillText(`High Score: ${u}`,s-30,70),d&&(e.fillStyle="rgba(255, 255, 255, 0.8)",e.fillRect(s/2-200,a/2-200,400,380),e.font="bold 48px Arial",e.fillStyle="red",e.textAlign="center",e.fillText("Game Over",s/2,a/2-130),e.font="bold 36px Arial",e.fillStyle="black",e.fillText(`Score: ${R}`,s/2,a/2-70),e.font="bold 36px Arial",e.fillStyle=w?"green":"black",e.fillText(`High Score: ${u}`,s/2,a/2-20),w&&(e.font="bold 36px Arial",e.fillStyle="green",e.fillText("NEW HIGH SCORE!",s/2,a/2+30)))}},[l,M,v,R,u,d,w,s,a,G,b,H,y]);const he=()=>{E(a/2),T(0),z([{x:s,height:Math.floor(Math.random()*400)+100}]),N(!1),P(!1),U(0),Z(!1),_(!1),j(!1)};return m.jsxs("div",{ref:B,style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px 0",position:"relative"},children:[m.jsx("button",{onClick:fe,className:"home-button",style:{position:"absolute",top:"15px",left:"15px",padding:"10px 20px",backgroundColor:"#ffcc00",color:"#333",border:"2px solid #ff3333",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",zIndex:"100",transition:"all 0.3s ease"},children:"Home"}),m.jsxs("div",{style:{position:"relative",transform:`scale(${ae})`,transformOrigin:"top center"},children:[m.jsx("canvas",{ref:J,width:s,height:a,onClick:()=>{d||(h||P(!0),T(V))},style:{cursor:"pointer",display:"block"}}),d&&m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, 90px)",zIndex:100},children:m.jsx("button",{onClick:he,style:{padding:"16px 32px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"24px"},children:"Play Again"})})]})]})};export{Te as default};
