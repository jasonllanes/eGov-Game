import{u as de,r as o,j as u}from"./index-8b18a069.js";const he="/eGov-Game/assets/Bird_2-0803fac5.png",ue="/eGov-Game/assets/pipe-top-a910e768.png",me="/eGov-Game/assets/pipe-bottom-82697d5b.png",ge="/eGov-Game/assets/Background-8bcfc983.png",pe="/eGov-Game/assets/bg-7ddd4924.png";const Se=5,J=-22,m=180,W=250,f=70,xe=450,K=15,Ie=2,V=170,q=830,Me=40,g=200,Q="flappyBirdHighScore",ee=100,ve=30,p=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"],S=5,X=15,be=3e3,we=1500,Ce=()=>{const te=de(),[s,oe]=o.useState(800),[a,ne]=o.useState(600),[se,re]=o.useState(1),[l,O]=o.useState(a/2),[x,C]=o.useState(0),[I,k]=o.useState([{x:s,height:Math.floor(Math.random()*400)+100}]),[d,z]=o.useState(!1),[E,$]=o.useState(0),[h,L]=o.useState(0),[M,ae]=o.useState(0),[v,U]=o.useState(!1),[b,N]=o.useState([]),[T,P]=o.useState(!1),[w,A]=o.useState([]),[R,_]=o.useState(!1),Y=o.useRef(null),D=o.useRef(null),j=o.useRef(null),B=o.useRef(null),F=o.useRef(null),G=o.useRef(null),H=o.useRef(null),ie=()=>{te("/eGov-Game/main-page")};o.useEffect(()=>{const n=localStorage.getItem(Q);n&&L(parseInt(n))},[]),o.useEffect(()=>{const n=()=>{if(Y.current){const e=Y.current.clientWidth,t=window.innerHeight*.8,i=1e3,r=1e3,c=i/r;let y=e,Z=e/c;Z>t&&(Z=t,y=t*c),oe(i),ne(r),re(y/i)}};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),o.useEffect(()=>{v&&fe()},[v]);const ce=()=>{const n=[];for(let e=0;e<ve;e++)n.push({x:g+60+Math.random()*30,y:l-20+Math.random()*40,size:S+Math.random()*(X-S),color:p[Math.floor(Math.random()*p.length)],speedX:2+Math.random()*3,speedY:-2+Math.random()*4,rotation:Math.random()*Math.PI*2,rotationSpeed:-.1+Math.random()*.2});A(n),_(!0)};o.useEffect(()=>{if(!T||b.length===0)return;const e=setInterval(()=>{N(i=>i.map(r=>({...r,x:r.x+r.speedX,y:r.y+r.speedY,speedY:r.speedY+.1,rotation:r.rotation+r.rotationSpeed})))},16),t=setTimeout(()=>{P(!1),N([])},be);return()=>{clearInterval(e),clearTimeout(t)}},[T,b]),o.useEffect(()=>{if(!R||w.length===0)return;const e=setInterval(()=>{A(i=>i.map(r=>({...r,x:r.x+r.speedX,y:r.y+r.speedY,speedY:r.speedY+.1,rotation:r.rotation+r.rotationSpeed})))},16),t=setTimeout(()=>{_(!1),A([])},we);return()=>{clearInterval(e),clearTimeout(t)}},[R,w]);const fe=()=>{const n=[];for(let e=0;e<ee/2;e++)n.push({x:Math.random()*50,y:Math.random()*a/2,size:S+Math.random()*(X-S),color:p[Math.floor(Math.random()*p.length)],speedX:1+Math.random()*3,speedY:-3+Math.random()*6,rotation:Math.random()*Math.PI*2,rotationSpeed:-.1+Math.random()*.2});for(let e=0;e<ee/2;e++)n.push({x:s-Math.random()*50,y:Math.random()*a/2,size:S+Math.random()*(X-S),color:p[Math.floor(Math.random()*p.length)],speedX:-1-Math.random()*3,speedY:-3+Math.random()*6,rotation:Math.random()*Math.PI*2,rotationSpeed:-.1+Math.random()*.2});N(n),P(!0)};o.useEffect(()=>{O(a/2),k([{x:s,height:Math.floor(Math.random()*400)+100}])},[s,a]),o.useEffect(()=>{const n=new Image;n.src=he,n.onload=()=>{j.current=n};const e=new Image;e.src=ue,e.onload=()=>{B.current=e};const t=new Image;t.src=me,t.onload=()=>{F.current=t};const i=new Image;i.src=ge,i.onload=()=>{G.current=i};const r=new Image;r.src=pe,r.onload=()=>{H.current=r}},[]),o.useEffect(()=>{if(d)return;const n=setInterval(()=>{O(e=>e+x),C(e=>e+Se),ae(e=>(e-Ie)%s),k(e=>{const t=e.map(c=>({...c,x:c.x-K})),i=t.filter(c=>c.x+m>0);return t.reduce((c,y)=>y.x>c?y.x:c,0)<s-xe?[...i,{x:s,height:Math.floor(Math.random()*400)+100}]:i}),I.forEach(e=>{e.x+m<g&&e.x+m>g-K&&$(t=>{const i=t+1;return ce(),i>h&&(L(i),localStorage.setItem(Q,i.toString()),U(!0)),i})}),I.forEach(e=>{(l<e.height||l+f>e.height+W)&&e.x<g+f/2&&e.x+m>g-f/2&&z(!0)}),(l+f>a||l<0)&&z(!0)},Me);return()=>clearInterval(n)},[x,d,I,l,s,a,h]),o.useEffect(()=>{const n=e=>{e.code==="Space"&&!d&&(C(J),e.preventDefault())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[d]),o.useEffect(()=>{const n=D.current;if(!n)return;const e=n.getContext("2d");if(e){if(n.width=s,n.height=a,e.clearRect(0,0,s,a),H.current?(e.drawImage(H.current,M,0,s,a),e.drawImage(H.current,M+s,0,s,a)):(e.fillStyle="skyblue",e.fillRect(0,0,s,a)),G.current&&(e.drawImage(G.current,M,q,s,V),e.drawImage(G.current,M+s,q,s,V)),I.forEach(t=>{B.current&&e.drawImage(B.current,t.x,0,m,t.height),F.current&&e.drawImage(F.current,t.x,t.height+W,m,a-(t.height+W))}),j.current){e.save(),e.translate(g+f/2,l+f/2);const t=x>0?Math.min(x*.04,Math.PI/4):Math.max(x*.04,-Math.PI/9);e.rotate(t),e.drawImage(j.current,-f/2,-f/2,f,f),e.restore()}T&&b.length>0&&b.forEach(t=>{e.save(),e.translate(t.x,t.y),e.rotate(t.rotation),e.fillStyle=t.color,e.fillRect(-t.size/2,-t.size/2,t.size,t.size),e.restore()}),R&&w.length>0&&w.forEach(t=>{e.save(),e.translate(t.x,t.y),e.rotate(t.rotation),e.fillStyle=t.color,e.fillRect(-t.size/2,-t.size/2,t.size,t.size),e.restore()}),e.font="bold 40px Arial",e.fillStyle="white",e.strokeStyle="black",e.lineWidth=2,e.textAlign="left",e.strokeText(`Score: ${E}`,30,70),e.fillText(`Score: ${E}`,30,70),e.textAlign="right",e.strokeText(`High Score: ${h}`,s-30,70),e.fillText(`High Score: ${h}`,s-30,70),d&&(e.fillStyle="rgba(255, 255, 255, 0.8)",e.fillRect(s/2-200,a/2-200,400,380),e.font="bold 48px Arial",e.fillStyle="red",e.textAlign="center",e.fillText("Game Over",s/2,a/2-130),e.font="bold 36px Arial",e.fillStyle="black",e.fillText(`Score: ${E}`,s/2,a/2-70),e.font="bold 36px Arial",e.fillStyle=v?"green":"black",e.fillText(`High Score: ${h}`,s/2,a/2-20),v&&(e.font="bold 36px Arial",e.fillStyle="green",e.fillText("NEW HIGH SCORE!",s/2,a/2+30)))}},[l,I,M,E,h,d,v,s,a,T,b,R,w]);const le=()=>{O(a/2),C(0),k([{x:s,height:Math.floor(Math.random()*400)+100}]),z(!1),$(0),U(!1),P(!1),_(!1)};return u.jsxs("div",{ref:Y,style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px 0",position:"relative"},children:[u.jsx("button",{onClick:ie,className:"home-button",style:{position:"absolute",top:"15px",left:"15px",padding:"10px 20px",backgroundColor:"#ffcc00",color:"#333",border:"2px solid #ff3333",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",zIndex:"100",transition:"all 0.3s ease"},children:"Home"}),u.jsxs("div",{style:{position:"relative",transform:`scale(${se})`,transformOrigin:"top center"},children:[u.jsx("canvas",{ref:D,width:s,height:a,onClick:()=>!d&&C(J),style:{cursor:"pointer",display:"block"}}),d&&u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, 90px)",zIndex:100},children:u.jsx("button",{onClick:le,style:{padding:"16px 32px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"24px"},children:"Play Again"})})]})]})};export{Ce as default};
