import{u as k,r as u,j as s}from"./index-4be1f7bd.js";import{e as L,a as P}from"./eGovPHLogoB-9418e187.js";const O=()=>{const N=k(),[i,c]=u.useState([]),[m,x]=u.useState(50),a=u.useRef(null),f=()=>{N("/eGov-Game/main-page")},b=e=>{const o=e.target.files;o&&g(Array.from(o))},g=e=>{const o=e.filter(l=>l.type==="application/pdf");if(o.length===0){alert("Please select valid PDF files");return}const r=o.map(l=>({id:`${l.name}-${Date.now()}-${Math.random()}`,file:l,originalSize:l.size,compressedSize:0,compressed:!1,compressing:!1}));c(l=>[...l,...r])},C=e=>{e.preventDefault(),e.stopPropagation()},S=e=>{e.preventDefault(),e.stopPropagation();const o=Array.from(e.dataTransfer.files);g(o)},j=async e=>{c(o=>o.map(r=>r.id===e?{...r,compressing:!0}:r)),await new Promise(o=>setTimeout(o,2e3)),c(o=>o.map(r=>{if(r.id===e){const l=m/100,p=Math.floor(r.originalSize*(1-l*.7));return{...r,compressedSize:p,compressed:!0,compressing:!1}}return r}))},F=async()=>{const e=i.filter(o=>!o.compressed&&!o.compressing);for(const o of e)await j(o.id)},v=e=>{const o=new Blob([e.file],{type:"application/pdf"}),r=URL.createObjectURL(o),l=document.createElement("a");l.href=r,l.download=`compressed_${e.file.name}`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)},w=()=>{i.filter(o=>o.compressed).forEach(o=>v(o))},z=e=>{c(o=>o.filter(r=>r.id!==e))},n=e=>{if(e===0)return"0 Bytes";const o=1024,r=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(e)/Math.log(o));return Math.round(e/Math.pow(o,l)*100)/100+" "+r[l]},y=()=>{c([]),x(50),a.current&&(a.current.value="")},d=()=>{const e=i.filter(t=>t.compressed),o=e.reduce((t,h)=>t+h.originalSize,0),r=e.reduce((t,h)=>t+h.compressedSize,0),l=o-r,p=o>0?Math.round(l/o*100):0;return{totalOriginal:o,totalCompressed:r,totalSaved:l,percentSaved:p,count:e.length}};return s.jsxs("div",{className:"pdf-compressor-container",children:[s.jsx("button",{className:"home-button",onClick:f,children:"Home"}),s.jsxs("div",{className:"pdf-header",children:[s.jsxs("div",{className:"logos-header",children:[s.jsx("div",{className:"logo-wrapper",children:s.jsx("img",{src:L,alt:"eGov Logo",className:"header-logo"})}),s.jsx("div",{className:"logo-wrapper",children:s.jsx("img",{src:P,alt:"eLGU Logo",className:"header-logo"})})]}),s.jsx("h1",{className:"pdf-title",children:"PDF Compressor"}),s.jsx("p",{className:"pdf-subtitle",children:"Reduce your PDF file size quickly and easily"})]}),s.jsx("div",{className:"compressor-content",children:i.length===0?s.jsxs("div",{className:"upload-area",onDragOver:C,onDrop:S,onClick:()=>{var e;return(e=a.current)==null?void 0:e.click()},children:[s.jsx("div",{className:"upload-icon",children:"ðŸ“„"}),s.jsx("h3",{children:"Drag & Drop your PDFs here"}),s.jsx("p",{children:"or click to browse (multiple files supported)"}),s.jsx("input",{ref:a,type:"file",accept:".pdf",multiple:!0,onChange:b,style:{display:"none"}})]}):s.jsxs("div",{className:"files-container",children:[s.jsxs("div",{className:"compression-controls-global",children:[s.jsxs("label",{htmlFor:"compression-level",children:["Compression Level for All: ",m,"%"]}),s.jsx("input",{id:"compression-level",type:"range",min:"10",max:"90",value:m,onChange:e=>x(Number(e.target.value))}),s.jsxs("div",{className:"compression-labels",children:[s.jsx("span",{children:"Low"}),s.jsx("span",{children:"Medium"}),s.jsx("span",{children:"High"})]})]}),s.jsx("div",{className:"files-list",children:i.map(e=>s.jsxs("div",{className:"file-item",children:[s.jsxs("div",{className:"file-info-row",children:[s.jsx("div",{className:"file-icon",children:"ðŸ“„"}),s.jsxs("div",{className:"file-details",children:[s.jsx("h4",{children:e.file.name}),s.jsxs("p",{children:["Original: ",n(e.originalSize)]}),e.compressed&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"compressed-size",children:["Compressed: ",n(e.compressedSize)]}),s.jsxs("p",{className:"savings",children:["Saved: ",n(e.originalSize-e.compressedSize),"(",Math.round((e.originalSize-e.compressedSize)/e.originalSize*100),"%)"]})]}),e.compressing&&s.jsx("p",{className:"compressing-text",children:"Compressing..."})]}),s.jsxs("div",{className:"file-actions",children:[!e.compressed&&!e.compressing&&s.jsx("button",{className:"compress-single-btn",onClick:()=>j(e.id),children:"Compress"}),e.compressed&&s.jsx("button",{className:"download-single-btn",onClick:()=>v(e),children:"Download"}),s.jsx("button",{className:"remove-btn",onClick:()=>z(e.id),disabled:e.compressing,children:"âœ•"})]})]}),e.compressing&&s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill"})})]},e.id))}),i.some(e=>e.compressed)&&s.jsxs("div",{className:"total-stats",children:[s.jsx("h3",{children:"Total Statistics"}),s.jsxs("p",{children:["Files Compressed: ",d().count," / ",i.length]}),s.jsxs("p",{children:["Total Original Size: ",n(d().totalOriginal)]}),s.jsxs("p",{children:["Total Compressed Size: ",n(d().totalCompressed)]}),s.jsxs("p",{className:"total-savings",children:["Total Saved: ",n(d().totalSaved)," (",d().percentSaved,"%)"]})]}),s.jsxs("div",{className:"action-buttons-multi",children:[s.jsx("button",{className:"add-more-btn",onClick:()=>{var e;return(e=a.current)==null?void 0:e.click()},children:"Add More Files"}),s.jsx("button",{className:"compress-all-btn",onClick:F,disabled:i.every(e=>e.compressed||e.compressing),children:"Compress All"}),s.jsx("button",{className:"download-all-btn",onClick:w,disabled:!i.some(e=>e.compressed),children:"Download All"}),s.jsx("button",{className:"clear-all-btn",onClick:y,children:"Clear All"})]})]})}),s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{children:"How it works:"}),s.jsxs("ol",{children:[s.jsx("li",{children:"Upload or drag & drop one or more PDF files"}),s.jsx("li",{children:"Choose your desired compression level"}),s.jsx("li",{children:'Click "Compress All" or compress files individually'}),s.jsx("li",{children:"Download your compressed PDF files"})]})]})]})};export{O as default};
